$(document).ready(function(e){$(window).resize(function(){$(".dataTables_scrollBody").css({height:tamanhoPercentualWindow(.7193500738552437)+"px"})});var t=$("#"+$tabelas.tabela_boletos).DataTable({language:idioma,searching:!0,scrollY:tamanhoPercentualWindow(.6893500738552437)+"px",paging:!1,info:!1,initComplete:function(e,t){this.fnAdjustColumnSizing(),$(".dataTables_filter input").addClass("form-control").attr("placeholder","Pesquisar lote"),$(".dataTables_empty").hide()},createdRow:function(e,t,a){},columnDefs:[{orderable:!1,className:"select-checkbox",targets:0}],select:{style:"os",selector:"td:first-child"}});$("."+$inputs.select_bancos).chosen({placeholder_text_single:"Selecionar",width:"100%"}),options_datePicker.dateFormat="mm/yy",options_datePicker.dateFormatMask="mm/yyyy",options_datePicker.showButtonPanel=!0,options_datePicker.onClose=function(e,t){console.log("FECHOU");var a=$("#ui-datepicker-div .ui-datepicker-month :selected").val(),o=$("#ui-datepicker-div .ui-datepicker-year :selected").val();$(this).datepicker("setDate",new Date(o,a,1)).trigger("change"),$(".date-picker").focusout()},options_datePicker.beforeShow=function(e,t){t.dpDiv.addClass("month_year_datepicker"),(datestr=$(this).val()).length>0&&(year=datestr.substring(datestr.length-4,datestr.length),month=datestr.substring(0,2),$(this).datepicker("option","defaultDate",new Date(year,month-1,1)),$(this).datepicker("setDate",new Date(year,month-1,1)),$(".ui-datepicker-calendar").hide())};var a=$("."+$inputs.data_consultar).datepicker(options_datePicker);function o(){var e=$("#"+$tabelas.tabela_boletos).find(".selected").length,t="."+$botao.btn_gerar+"["+$roles.role_id+"=2]";e>0?$(t+", ."+$botao.btn_acao).show():$(t+", ."+$botao.btn_acao).hide(),$("selecionados").html(e+" "+(e>1?"Selecionados":"Selecionado"))}a.datepicker("option","showOn","button"),a.datepicker("option","buttonText",'<i class="fas fa-calendar"></i>'),a.datepicker("setDate",new Date).trigger("change"),$("."+$form.dados_filtros).on("submit",function(){var e=dadosFormularioParaJson($(this).serializeArray());return chamadaAjax({url:"/mensalidades/consultar",type:"GET",data:e,LoadMsg:"Consultando...",success:function(e){var a=[],o=e.data_msg,s=o.length;$("consultados").html(s+" "+(s>1?"Mensalidades":"Mensalidade")),$.each(o,function(e,t){var o,s;a.push((s="",s="<td></td>",s+="<td>"+(o=t).DOCUMENTO+"</td>",s+="<td>"+o.NOME+"</td>",s+="<td>"+getDataBR(o.EMISSAO)+"</td>",s+="<td>"+getDataBR(o.VENCIMENTO)+"</td>",s+="<td>"+formatarNumeroCompleto(o.VALOR)+"</td>",$("<tr />").prepend(s)[0]))}),t.rows.add(a).draw(!1)}}),!1}),$("body").on("click","."+$botao.btn_gerar,function(){if(2!=$(this).attr($roles.role_id))chamadaAjax({url:"/mensalidades/gerar",type:"PUT",LoadMsg:"Gerando...",data:{data_gerar:$('input[name="'+$inputs.data_consultar+'"]').val()},success:function(e){var t=e.data_msg[0].MENSALIDADES_GERADAS;0==t?mostrarMensagemErroSucessoAlerta("Não há mensalidades a ser geradas",!1,"warning"):mostrarMensagemErroSucessoAlerta(t+" Mensalidades geradas para o mês selecionado",!1,!1)}});else{var e=[],t=$("."+$inputs.select_bancos).val();$("#"+$tabelas.tabela_boletos).find("tr.selected").each(function(t){e.push($(this).children("td:nth-child(2)").text())}),e.length>0&&chamadaAjax({AbrirLink:!0,url:"/boletos/imprimir",data:{documento:JSON.stringify(e),conta_usar:t}})}}),window.TB=function(){return t},t.on("deselect",function(e,t,a,s){o()}),t.on("select",function(e,t,a,s){o()}),$("body").on("click",".selecionar-todos",function(){$(this).is(":checked")?t.rows().select():t.rows().deselect()})});